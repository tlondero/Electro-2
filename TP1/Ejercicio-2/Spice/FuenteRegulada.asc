Version 4
SHEET 1 2084 680
WIRE 1584 -1504 544 -1504
WIRE 304 -1488 -784 -1488
WIRE 1568 -1488 560 -1488
WIRE -416 -1472 -768 -1472
WIRE -48 -1472 -416 -1472
WIRE 288 -1472 -48 -1472
WIRE -48 -1376 -48 -1472
WIRE 288 -1376 288 -1472
WIRE 288 -1376 -48 -1376
WIRE -768 -1248 -768 -1472
WIRE -416 -1248 -416 -1472
WIRE -416 -1248 -768 -1248
WIRE -48 -1248 -48 -1376
WIRE -48 -1248 -416 -1248
WIRE 288 -1248 288 -1376
WIRE 288 -1248 -48 -1248
WIRE 560 -1152 560 -1488
WIRE 1568 -1152 1568 -1488
WIRE 1568 -1152 560 -1152
WIRE -768 -1120 -768 -1248
WIRE -416 -1120 -416 -1248
WIRE -416 -1120 -768 -1120
WIRE -48 -1120 -48 -1248
WIRE -48 -1120 -416 -1120
WIRE 288 -1120 288 -1248
WIRE 288 -1120 -48 -1120
WIRE -784 -1104 -784 -1488
WIRE 304 -1104 304 -1488
WIRE 304 -1104 -784 -1104
WIRE 560 -960 560 -1152
WIRE 1568 -960 1568 -1152
WIRE 1568 -960 560 -960
WIRE -1376 -896 -1408 -896
WIRE -1264 -896 -1296 -896
WIRE -1152 -896 -1184 -896
WIRE -1040 -896 -1072 -896
WIRE 96 -896 16 -896
WIRE 304 -896 96 -896
WIRE 352 -896 304 -896
WIRE 304 -880 304 -896
WIRE 352 -880 352 -896
WIRE 96 -832 96 -896
WIRE 224 -832 192 -832
WIRE 240 -832 224 -832
WIRE 288 -832 240 -832
WIRE -1376 -800 -1408 -800
WIRE -1264 -800 -1296 -800
WIRE -1152 -800 -1184 -800
WIRE -1040 -800 -1072 -800
WIRE -128 -784 -224 -784
WIRE 560 -784 560 -960
WIRE 1568 -784 1568 -960
WIRE 1568 -784 560 -784
WIRE 32 -768 -64 -768
WIRE 224 -768 224 -832
WIRE 304 -768 304 -784
WIRE 352 -768 352 -784
WIRE 352 -768 304 -768
WIRE -224 -752 -224 -784
WIRE -128 -752 -160 -752
WIRE 32 -720 32 -768
WIRE 144 -720 144 -768
WIRE 144 -720 32 -720
WIRE 304 -720 304 -768
WIRE 304 -704 304 -720
WIRE 224 -672 224 -720
WIRE 224 -672 176 -672
WIRE 32 -608 32 -720
WIRE 176 -608 32 -608
WIRE 304 -608 304 -624
WIRE 304 -608 272 -608
WIRE -320 -560 -368 -560
WIRE -256 -560 -320 -560
WIRE -160 -560 -160 -752
WIRE -160 -560 -176 -560
WIRE -64 -560 -160 -560
WIRE 304 -560 304 -608
WIRE 304 -560 16 -560
WIRE 384 -560 304 -560
WIRE 416 -560 384 -560
WIRE 560 -560 560 -784
WIRE 1568 -560 1568 -784
WIRE 1568 -560 560 -560
WIRE -320 -512 -320 -560
WIRE 560 -464 560 -560
WIRE 1568 -464 1568 -560
WIRE 1568 -464 560 -464
WIRE 560 -352 560 -464
WIRE 1568 -352 1568 -464
WIRE 1568 -352 560 -352
WIRE 560 -80 560 -352
WIRE 1568 -80 1568 -352
WIRE 1568 -80 560 -80
WIRE 544 -64 544 -1504
WIRE 1584 -64 1584 -1504
WIRE 1584 -64 544 -64
FLAG -320 -448 0
FLAG -96 -736 V+
FLAG -96 -800 V-
FLAG -1408 -896 V+
FLAG -1040 -800 0
FLAG -1408 -800 V-
FLAG -1040 -896 0
FLAG 16 -896 V+
FLAG 416 -480 0
FLAG 96 -672 0
FLAG -224 -752 0
FLAG -448 -560 V-
FLAG 1456 -656 0
FLAG 384 -560 Vout
SYMBOL res 32 -576 R90
WINDOW 0 0 56 Invisible 2
WINDOW 3 -34 59 VTop 2
SYMATTR InstName R8
SYMATTR Value {R1}
SYMBOL res -160 -576 R90
WINDOW 0 0 56 Invisible 2
WINDOW 3 -34 57 VTop 2
SYMATTR InstName R9
SYMATTR Value {R2}
SYMBOL zener -336 -512 R0
WINDOW 0 24 0 Invisible 2
WINDOW 3 -155 31 Left 2
SYMATTR InstName D2
SYMATTR Value BZX84B6V2L
SYMBOL voltage -1280 -800 R90
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 0 24 16 Invisible 2
WINDOW 3 79 -23 VRight 2
SYMATTR InstName V1
SYMATTR Value SINE(0 {NOISE_AMP} {NOISE_FREQ})
SYMBOL voltage -1392 -896 R270
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 0 24 16 Invisible 2
WINDOW 3 81 -50 VRight 2
SYMATTR InstName V6
SYMATTR Value SINE(0 {NOISE_AMP} {NOISE_FREQ})
SYMBOL voltage -1280 -896 R270
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 0 24 16 Invisible 2
WINDOW 3 50 -8 VRight 2
SYMATTR InstName V7
SYMATTR Value {LINE_VOLT_POS}
SYMBOL voltage -1168 -800 R90
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 0 24 16 Invisible 2
WINDOW 3 46 -159 VRight 2
SYMATTR InstName V8
SYMATTR Value {LINE_VOLT_NEG}
SYMBOL npn 240 -880 R0
WINDOW 0 56 32 Invisible 2
WINDOW 3 -29 -39 Left 2
SYMATTR InstName Q2
SYMATTR Value Qtip41c
SYMBOL npn 96 -768 R270
WINDOW 0 56 32 Invisible 2
WINDOW 3 82 6 VRight 2
SYMATTR InstName Q1
SYMATTR Value BC547C
SYMBOL npn 176 -672 M90
WINDOW 0 56 32 Invisible 2
WINDOW 3 86 103 VLeft 2
SYMATTR InstName Q3
SYMATTR Value BC547C
SYMBOL res 288 -720 R0
WINDOW 0 36 40 Invisible 2
WINDOW 3 37 54 Left 2
SYMATTR InstName R1
SYMATTR Value {Ra}
SYMBOL res 432 -464 R180
WINDOW 0 36 76 Invisible 2
WINDOW 3 -13 121 Left 2
SYMATTR InstName R2
SYMATTR Value {RL}
SYMBOL res 320 -736 R90
WINDOW 0 0 56 Invisible 2
WINDOW 3 2 129 VTop 2
SYMATTR InstName R3
SYMATTR Value {Rb}
SYMBOL res 192 -688 R90
WINDOW 0 0 56 Invisible 2
WINDOW 3 36 61 VTop 2
SYMATTR InstName R4
SYMATTR Value {Rc}
SYMBOL res 320 -784 R90
WINDOW 0 0 56 Invisible 2
WINDOW 3 0 119 VTop 2
SYMATTR InstName R5
SYMATTR Value 56
SYMBOL voltage -1056 -800 R90
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 0 24 16 Invisible 2
WINDOW 3 118 -212 VRight 2
SYMATTR InstName V2
SYMATTR Value PULSE(0 {NOISE_AMP_TRI} 1m 0.01 0.01 1m 0 100)
SYMBOL voltage -1168 -896 R270
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 0 24 16 Invisible 2
WINDOW 3 110 -314 VRight 2
SYMATTR InstName V3
SYMATTR Value PULSE(0 {NOISE_AMP_TRI} 1m 0.01 0.01 1m 0 100)
SYMBOL Opamps\\OP284 -96 -704 M180
WINDOW 0 16 32 Invisible 2
WINDOW 3 26 101 Left 2
SYMATTR InstName U1
SYMBOL npn 288 -880 R0
WINDOW 0 56 32 Invisible 2
WINDOW 3 33 -38 Left 2
SYMATTR InstName Q4
SYMATTR Value Qtip41c
SYMBOL res -352 -576 R90
WINDOW 0 0 56 Invisible 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value {Rz}
SYMBOL current 1456 -736 R0
WINDOW 123 44 25 Left 2
WINDOW 39 0 0 Left 0
SYMATTR Value2 AC 1
SYMATTR InstName I1
SYMATTR Value SINE(0 1)
TEXT 592 -496 Left 2 ;.tran 0 1m 0 startup
TEXT -752 -1400 Left 2 !.param NOISE_AMP = 0
TEXT -752 -1360 Left 2 !.param NOISE_FREQ = 10k
TEXT -776 -1528 Left 4 ;User Input
TEXT -696 -1456 Left 3 ;Line Voltage
TEXT -752 -1320 Left 2 !.param LINE_VOLT_POS = 14
TEXT -752 -1280 Left 2 !.param LINE_VOLT_NEG = 7
TEXT -752 -1224 Left 3 ;Load Characteristics
TEXT -736 -1168 Left 2 !.param RL ={LOAD_RES}
TEXT -368 -1448 Left 3 ;Current Protection
TEXT -344 -1360 Left 2 !.param Ra = 0.56
TEXT -344 -1320 Left 2 !.param Rb = 680
TEXT 680 -1360 Left 2 !.step dec param LOAD_RES 100 0.1 50
TEXT -344 -1280 Left 2 !.param Rc = 10000
TEXT -360 -1224 Left 3 ;Detection Circuit
TEXT -336 -1184 Left 2 !.param R2 = 6k8
TEXT -336 -1152 Left 2 !.param R1 = 9870
TEXT -24 -1224 Left 3 ;Voltage Generator
TEXT 64 -1184 Left 2 ;Vz = 6.2V
TEXT 16 -1152 Left 2 !.param Rz = 120
TEXT -304 -1408 Left 2 ;Tp = BC547C
TEXT 16 -1440 Left 3 ;Error Amplifier
TEXT 40 -1400 Left 2 ;Opamp = OP284
TEXT 8 -1336 Left 3 ;Pass Transistor
TEXT -32 -1296 Left 2 ;BC547C-TIP31C Darlington
TEXT 584 -1536 Left 4 ;Simulations
TEXT 584 -1448 Left 3 ;Foldback V/I characteristics
TEXT 608 -1304 Left 2 ;Se debe igualar RL a el step parameter LOAD_RES, luego se grafica V(Vout)
TEXT 608 -1272 Left 2 ;e -I(R2) en el eje horizontal, luego, hacer click derecho, click en view
TEXT 608 -1240 Left 2 ;y finalmente click en show data points, sino NO FUNCIONARA
TEXT -344 -1616 Left 2 !.param Ra_linear = 0.2748
TEXT -344 -1576 Left 2 !.param Rb_linear = 0.1
TEXT -344 -1536 Left 2 !.param Rc_linear = 10meg
TEXT 592 -1112 Left 3 ;Line sinusoidal noise simulation
TEXT 600 -1056 Left 2 ;Se debe colocar un valor no nulo al parametro NOISE_AMP.
TEXT 600 -1024 Left 2 ;Luego setear la frecuencia de la senoidal montada sobre la alimentación.
TEXT 592 -928 Left 3 ;Linear current protection
TEXT 600 -872 Left 2 ;Igual que para Foldback V/I Characteristics pero
TEXT 600 -840 Left 2 ;reemplazar Ra, Rb y Rc por Ra_linear, Rb_linear y Rc_linear
TEXT -1080 -1256 Left 2 !.inc "TIP41C.LIB"
TEXT -224 -520 Left 2 ;Suma de corriente
TEXT 208 -536 Left 2 ;Muestrea tensión
TEXT 912 -1560 Left 3 ;(Utilizar el solver en alternate
TEXT 864 -1528 Left 3 ;Tools->control panel->spice->solver)
TEXT -1112 -1216 Left 2 !.inc "BZX84B6V2L.LIB"
TEXT 1240 -600 Left 2 ;.ac dec 1000 100 10MEG
TEXT 592 -760 Left 3 ;Impedancia de salida
TEXT 592 -720 Left 2 ;Para ver la impedancia de salida basta con reemplazar la RL
TEXT 592 -696 Left 2 ;por la fuente de corriente y utilizar
TEXT 592 -672 Left 2 ;la directiva que esta aqui comentada,
TEXT 992 -672 Left 2 ;y medir la tensión Vout/I1
TEXT 584 -536 Left 3 ;Análisis de regimen transitorio
TEXT 688 -1400 Left 2 !.tran 0 50m 0
TEXT -752 -1424 Left 2 !.param NOISE_AMP_TRI =0
TEXT 600 -392 Left 2 ;.tran 0 1.05 1
TEXT 592 -440 Left 3 ;Análisis de régimen permanente
