Version 4
SHEET 1 1904 680
WIRE 1584 -1504 544 -1504
WIRE 304 -1488 -784 -1488
WIRE 1568 -1488 560 -1488
WIRE -416 -1472 -768 -1472
WIRE -48 -1472 -416 -1472
WIRE 288 -1472 -48 -1472
WIRE -48 -1376 -48 -1472
WIRE 288 -1376 288 -1472
WIRE 288 -1376 -48 -1376
WIRE -768 -1248 -768 -1472
WIRE -416 -1248 -416 -1472
WIRE -416 -1248 -768 -1248
WIRE -48 -1248 -48 -1376
WIRE -48 -1248 -416 -1248
WIRE 288 -1248 288 -1376
WIRE 288 -1248 -48 -1248
WIRE 560 -1152 560 -1488
WIRE 1568 -1152 1568 -1488
WIRE 1568 -1152 560 -1152
WIRE -768 -1120 -768 -1248
WIRE -416 -1120 -416 -1248
WIRE -416 -1120 -768 -1120
WIRE -48 -1120 -48 -1248
WIRE -48 -1120 -416 -1120
WIRE 288 -1120 288 -1248
WIRE 288 -1120 -48 -1120
WIRE -784 -1104 -784 -1488
WIRE 304 -1104 304 -1488
WIRE 304 -1104 -784 -1104
WIRE 560 -960 560 -1152
WIRE 1568 -960 1568 -1152
WIRE 1568 -960 560 -960
WIRE 96 -896 -592 -896
WIRE 304 -896 96 -896
WIRE 304 -880 304 -896
WIRE 96 -832 96 -896
WIRE 224 -832 192 -832
WIRE 240 -832 224 -832
WIRE 560 -784 560 -960
WIRE 1568 -784 1568 -960
WIRE 1568 -784 560 -784
WIRE 224 -768 224 -832
WIRE 304 -768 304 -784
WIRE -864 -752 -864 -800
WIRE -96 -736 -192 -736
WIRE 32 -720 -32 -720
WIRE 144 -720 144 -768
WIRE 144 -720 32 -720
WIRE 304 -720 304 -768
WIRE -192 -704 -192 -736
WIRE -96 -704 -128 -704
WIRE 304 -704 304 -720
WIRE 224 -672 224 -720
WIRE 224 -672 176 -672
WIRE 32 -608 32 -720
WIRE 176 -608 32 -608
WIRE 304 -608 304 -624
WIRE 304 -608 272 -608
WIRE -448 -560 -592 -560
WIRE -320 -560 -368 -560
WIRE -256 -560 -320 -560
WIRE -128 -560 -128 -704
WIRE -128 -560 -176 -560
WIRE -64 -560 -128 -560
WIRE 304 -560 304 -608
WIRE 304 -560 16 -560
WIRE 464 -560 304 -560
WIRE -320 -512 -320 -560
WIRE -1008 -384 -1008 -432
WIRE 560 -80 560 -784
WIRE 1568 -80 1568 -784
WIRE 1568 -80 560 -80
WIRE 544 -64 544 -1504
WIRE 1584 -64 1584 -1504
WIRE 1584 -64 544 -64
FLAG -320 -448 0
FLAG -64 -688 V+
FLAG -64 -752 V-
FLAG -864 -880 V+
FLAG -1008 -512 0
FLAG -1008 -304 V-
FLAG -864 -672 0
FLAG -592 -560 V-
FLAG -592 -896 V+
FLAG 464 -480 0
FLAG 96 -672 0
FLAG -192 -704 0
SYMBOL res 32 -576 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value {R1}
SYMBOL res -160 -576 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value {R2}
SYMBOL res -352 -576 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value {Rz}
SYMBOL zener -336 -512 R0
SYMATTR InstName D2
SYMATTR Value BZX84B6V2L
SYMBOL voltage -1360 -624 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value SINE(0 {NOISE_AMP} {NOISE_FREQ})
SYMBOL voltage -1168 -832 R180
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V6
SYMATTR Value SINE(0 {NOISE_AMP} {NOISE_FREQ})
SYMBOL voltage -864 -768 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V7
SYMATTR Value 14
SYMBOL voltage -1008 -528 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V8
SYMATTR Value 7
SYMBOL npn 240 -880 R0
SYMATTR InstName Q2
SYMATTR Value Qtip41c
SYMBOL npn 96 -768 R270
SYMATTR InstName Q1
SYMATTR Value BC547B
SYMBOL npn 176 -672 M90
SYMATTR InstName Q3
SYMATTR Value BC337-40
SYMBOL res 288 -720 R0
SYMATTR InstName R1
SYMATTR Value {Ra}
SYMBOL res 480 -464 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R2
SYMATTR Value {RL}
SYMBOL res 320 -736 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value {Rb}
SYMBOL res 192 -688 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value {Rc}
SYMBOL res 320 -784 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 1k
SYMBOL voltage -1008 -400 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value PULSE(0 {NOISE_AMP} 1m 0.01 0.01 1m 0 100)
SYMBOL voltage -864 -784 R180
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value PULSE(0 {NOISE_AMP} 1m 0.01 0.01 1m 0 100)
SYMBOL Opamps\\OP284 -64 -656 M180
SYMATTR InstName U1
TEXT -680 -424 Left 2 !.tran 1
TEXT -728 -456 Left 2 !.inc "TL084.301"
TEXT -736 -1400 Left 2 !.param NOISE_AMP = 0.5
TEXT -736 -1360 Left 2 !.param NOISE_FREQ = 50
TEXT -776 -1528 Left 4 ;User Input
TEXT -696 -1448 Left 3 ;Line Voltage
TEXT -736 -1320 Left 2 !.param LINE_VOLT+ = 15
TEXT -736 -1280 Left 2 !.param LINE_VOLT- = 20
TEXT -752 -1224 Left 3 ;Load Characteristics
TEXT -736 -1168 Left 2 !.param RL = {LOAD_RES}
TEXT -368 -1448 Left 3 ;Current Protection
TEXT -344 -1360 Left 2 !.param Ra = 0.56
TEXT -344 -1320 Left 2 !.param Rb = 680
TEXT 680 -1360 Left 2 !.step dec param LOAD_RES 100 0.1 50
TEXT -344 -1280 Left 2 !.param Rc = 10000
TEXT -360 -1224 Left 3 ;Detection Circuit
TEXT -336 -1184 Left 2 !.param R2 = 6k8
TEXT -336 -1152 Left 2 !.param R1 = 10000
TEXT -24 -1224 Left 3 ;Voltage Generator
TEXT 64 -1184 Left 2 ;Vz = 6.2V
TEXT 16 -1152 Left 2 !.param Rz =68
TEXT -304 -1408 Left 2 ;Tp = BC337
TEXT 16 -1440 Left 3 ;Error Amplifier
TEXT 40 -1400 Left 2 ;Opamp = OP284
TEXT 8 -1336 Left 3 ;Pass Transistor
TEXT -8 -1296 Left 2 ;BC547-TIP31C Darlington
TEXT 584 -1536 Left 4 ;Simulations
TEXT 584 -1448 Left 3 ;Foldback V/I characteristics
TEXT 608 -1304 Left 2 ;Se debe igualar RL a el step parameter LOAD_RES, luego se grafica V(Vout)
TEXT 608 -1272 Left 2 ;e -I(R2) en el eje horizontal, luego, hacer click derecho, click en view
TEXT 608 -1240 Left 2 ;y finalmente click en show data points, sino NO FUNCIONARA
TEXT -344 -1616 Left 2 !.param Ra_linear = 0.2748
TEXT -344 -1576 Left 2 !.param Rb_linear = 0.0000000001
TEXT -344 -1536 Left 2 !.param Rc_linear = 99999999999999
TEXT 592 -1112 Left 3 ;Line sinusoidal noise simulation
TEXT 600 -1056 Left 2 ;Se debe colocar un valor no nulo al parametro NOISE_AMP.
TEXT 600 -1024 Left 2 ;Luego setear la frecuencia de la senoidal montada sobre la alimentación.
TEXT 592 -928 Left 3 ;Linear current protection
TEXT 600 -872 Left 2 ;Igual que para Foldback V/I Characteristics pero
TEXT 600 -840 Left 2 ;reemplazar Ra, Rb y Rc por Ra_linear, Rb_linear y Rc_linear
TEXT 688 -704 Left 2 ;corriente maxima por fuente
TEXT 688 -680 Left 2 ;tension minima y maxima de fuente de linea positiva y negativa
TEXT 688 -656 Left 2 ;Rl minima
TEXT 688 -632 Left 2 ;rl maxima
TEXT -608 -248 Left 2 ;PotRa = 2.5A^2 * 0.5 = 3.125W
TEXT -632 -208 Left 2 !;((Vo + VbeonTp) - (Vo+Ra*Iocc))^2 / Rb = PotRb? = ~
TEXT 40 -1048 Left 2 !.inc "TIP41C.LIB"
TEXT -704 -1144 Left 2 !;.param RL = 4
TEXT -184 -496 Left 2 ;Suma de corriente
TEXT 216 -480 Left 2 ;Muestrea tensión
TEXT -664 -168 Left 2 ;Utilizar el solver en alternate: Tools->control panel->spice->solver
