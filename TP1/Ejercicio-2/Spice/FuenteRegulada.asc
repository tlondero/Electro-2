Version 4
SHEET 1 1904 680
WIRE 1584 -1504 544 -1504
WIRE 304 -1488 -784 -1488
WIRE 1568 -1488 560 -1488
WIRE -416 -1472 -768 -1472
WIRE -48 -1472 -416 -1472
WIRE 288 -1472 -48 -1472
WIRE -48 -1376 -48 -1472
WIRE 288 -1376 288 -1472
WIRE 288 -1376 -48 -1376
WIRE -768 -1248 -768 -1472
WIRE -416 -1248 -416 -1472
WIRE -416 -1248 -768 -1248
WIRE -48 -1248 -48 -1376
WIRE -48 -1248 -416 -1248
WIRE 288 -1248 288 -1376
WIRE 288 -1248 -48 -1248
WIRE 560 -1152 560 -1488
WIRE 1568 -1152 1568 -1488
WIRE 1568 -1152 560 -1152
WIRE -768 -1120 -768 -1248
WIRE -416 -1120 -416 -1248
WIRE -416 -1120 -768 -1120
WIRE -48 -1120 -48 -1248
WIRE -48 -1120 -416 -1120
WIRE 288 -1120 288 -1248
WIRE 288 -1120 -48 -1120
WIRE -784 -1104 -784 -1488
WIRE 304 -1104 304 -1488
WIRE 304 -1104 -784 -1104
WIRE 560 -960 560 -1152
WIRE 1568 -960 1568 -1152
WIRE 1568 -960 560 -960
WIRE -608 -896 -640 -896
WIRE -496 -896 -528 -896
WIRE -384 -896 -416 -896
WIRE -272 -896 -304 -896
WIRE 96 -896 16 -896
WIRE 304 -896 96 -896
WIRE 304 -880 304 -896
WIRE 96 -832 96 -896
WIRE 224 -832 192 -832
WIRE 240 -832 224 -832
WIRE -608 -800 -640 -800
WIRE -496 -800 -528 -800
WIRE -384 -800 -416 -800
WIRE -272 -800 -304 -800
WIRE 560 -784 560 -960
WIRE 1568 -784 1568 -960
WIRE 1568 -784 560 -784
WIRE 224 -768 224 -832
WIRE 304 -768 304 -784
WIRE -96 -736 -192 -736
WIRE 32 -720 -32 -720
WIRE 144 -720 144 -768
WIRE 144 -720 32 -720
WIRE 304 -720 304 -768
WIRE -192 -704 -192 -736
WIRE -96 -704 -128 -704
WIRE 304 -704 304 -720
WIRE 224 -672 224 -720
WIRE 224 -672 176 -672
WIRE 32 -608 32 -720
WIRE 176 -608 32 -608
WIRE 304 -608 304 -624
WIRE 304 -608 272 -608
WIRE -448 -560 -528 -560
WIRE -320 -560 -368 -560
WIRE -256 -560 -320 -560
WIRE -128 -560 -128 -704
WIRE -128 -560 -176 -560
WIRE -64 -560 -128 -560
WIRE 304 -560 304 -608
WIRE 304 -560 16 -560
WIRE 464 -560 304 -560
WIRE -320 -512 -320 -560
WIRE 560 -80 560 -784
WIRE 1568 -80 1568 -784
WIRE 1568 -80 560 -80
WIRE 544 -64 544 -1504
WIRE 1584 -64 1584 -1504
WIRE 1584 -64 544 -64
FLAG -320 -448 0
FLAG -64 -688 V+
FLAG -64 -752 V-
FLAG -640 -896 V+
FLAG -272 -800 0
FLAG -640 -800 V-
FLAG -272 -896 0
FLAG -528 -560 V-
FLAG 16 -896 V+
FLAG 464 -480 0
FLAG 96 -672 0
FLAG -192 -704 0
SYMBOL res 32 -576 R90
WINDOW 0 0 56 Invisible 2
WINDOW 3 -34 59 VTop 2
SYMATTR InstName R8
SYMATTR Value {R1}
SYMBOL res -160 -576 R90
WINDOW 0 0 56 Invisible 2
WINDOW 3 -34 57 VTop 2
SYMATTR InstName R9
SYMATTR Value {R2}
SYMBOL res -352 -576 R90
WINDOW 0 0 56 Invisible 2
WINDOW 3 -34 58 VTop 2
SYMATTR InstName R10
SYMATTR Value {Rz}
SYMBOL zener -336 -512 R0
WINDOW 0 24 0 Invisible 2
WINDOW 3 -155 31 Left 2
SYMATTR InstName D2
SYMATTR Value BZX84C6V2L
SYMBOL voltage -288 -800 R90
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 0 24 16 Invisible 2
WINDOW 3 79 -8 VRight 2
SYMATTR InstName V1
SYMATTR Value SINE(0 {NOISE_AMP} {NOISE_FREQ})
SYMBOL voltage -624 -896 R270
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 0 24 16 Invisible 2
WINDOW 3 77 -41 VRight 2
SYMATTR InstName V6
SYMATTR Value SINE(0 {NOISE_AMP} {NOISE_FREQ})
SYMBOL voltage -400 -896 R270
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 0 24 16 Invisible 2
WINDOW 3 47 -46 VRight 2
SYMATTR InstName V7
SYMATTR Value {LINE_VOLT_POS}
SYMBOL voltage -400 -800 R90
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 0 24 16 Invisible 2
WINDOW 3 47 -140 VRight 2
SYMATTR InstName V8
SYMATTR Value {LINE_VOLT_NEG}
SYMBOL npn 240 -880 R0
WINDOW 0 56 32 Invisible 2
WINDOW 3 50 47 Left 2
SYMATTR InstName Q2
SYMATTR Value Qtip41c
SYMBOL npn 96 -768 R270
WINDOW 0 56 32 Invisible 2
WINDOW 3 82 6 VRight 2
SYMATTR InstName Q1
SYMATTR Value BC547B
SYMBOL npn 176 -672 M90
WINDOW 0 56 32 Invisible 2
WINDOW 3 86 103 VLeft 2
SYMATTR InstName Q3
SYMATTR Value BC337-40
SYMBOL res 288 -720 R0
WINDOW 0 36 40 Invisible 2
WINDOW 3 37 54 Left 2
SYMATTR InstName R1
SYMATTR Value {Ra}
SYMBOL res 480 -464 R180
WINDOW 0 36 76 Invisible 2
WINDOW 3 -13 121 Left 2
SYMATTR InstName R2
SYMATTR Value {RL}
SYMBOL res 320 -736 R90
WINDOW 0 0 56 Invisible 2
WINDOW 3 2 129 VTop 2
SYMATTR InstName R3
SYMATTR Value {Rb}
SYMBOL res 192 -688 R90
WINDOW 0 0 56 Invisible 2
WINDOW 3 36 61 VTop 2
SYMATTR InstName R4
SYMATTR Value {Rc}
SYMBOL res 320 -784 R90
WINDOW 0 0 56 Invisible 2
WINDOW 3 0 119 VTop 2
SYMATTR InstName R5
SYMATTR Value 1k
SYMBOL voltage -512 -800 R90
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 0 24 16 Invisible 2
WINDOW 3 111 -191 VRight 2
SYMATTR InstName V2
SYMATTR Value PULSE(0 {NOISE_AMP} 1m 0.01 0.01 1m 0 100)
SYMBOL voltage -512 -896 R270
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 0 24 16 Invisible 2
WINDOW 3 105 -304 VRight 2
SYMATTR InstName V3
SYMATTR Value PULSE(0 {NOISE_AMP} 1m 0.01 0.01 1m 0 100)
SYMBOL Opamps\\OP284 -64 -656 M180
WINDOW 0 16 32 Invisible 2
WINDOW 3 26 101 Left 2
SYMATTR InstName U1
TEXT -680 -424 Left 2 !.tran 0.5
TEXT -752 -1400 Left 2 !.param NOISE_AMP = 0
TEXT -752 -1360 Left 2 !.param NOISE_FREQ = 50
TEXT -776 -1528 Left 4 ;User Input
TEXT -696 -1448 Left 3 ;Line Voltage
TEXT -752 -1320 Left 2 !.param LINE_VOLT_POS = 14
TEXT -752 -1280 Left 2 !.param LINE_VOLT_NEG = 7
TEXT -752 -1224 Left 3 ;Load Characteristics
TEXT -736 -1168 Left 2 !.param RL = 4
TEXT -368 -1448 Left 3 ;Current Protection
TEXT -344 -1360 Left 2 !.param Ra = 0.56
TEXT -344 -1320 Left 2 !.param Rb = 680
TEXT 680 -1360 Left 2 ;.step dec param LOAD_RES 100 0.1 50
TEXT -344 -1280 Left 2 !.param Rc = 10000
TEXT -360 -1224 Left 3 ;Detection Circuit
TEXT -336 -1184 Left 2 !.param R2 = 6k8
TEXT -336 -1152 Left 2 !.param R1 = 10000
TEXT -24 -1224 Left 3 ;Voltage Generator
TEXT 64 -1184 Left 2 ;Vz = 6.2V
TEXT 16 -1152 Left 2 !.param Rz =120
TEXT -304 -1408 Left 2 ;Tp = BC337
TEXT 16 -1440 Left 3 ;Error Amplifier
TEXT 40 -1400 Left 2 ;Opamp = OP284
TEXT 8 -1336 Left 3 ;Pass Transistor
TEXT -8 -1296 Left 2 ;BC547-TIP31C Darlington
TEXT 584 -1536 Left 4 ;Simulations
TEXT 584 -1448 Left 3 ;Foldback V/I characteristics
TEXT 608 -1304 Left 2 ;Se debe igualar RL a el step parameter LOAD_RES, luego se grafica V(Vout)
TEXT 608 -1272 Left 2 ;e -I(R2) en el eje horizontal, luego, hacer click derecho, click en view
TEXT 608 -1240 Left 2 ;y finalmente click en show data points, sino NO FUNCIONARA
TEXT -344 -1616 Left 2 !.param Ra_linear = 0.2748
TEXT -344 -1576 Left 2 !.param Rb_linear = 0.0000000001
TEXT -344 -1536 Left 2 !.param Rc_linear = 99999999999999
TEXT 592 -1112 Left 3 ;Line sinusoidal noise simulation
TEXT 600 -1056 Left 2 ;Se debe colocar un valor no nulo al parametro NOISE_AMP.
TEXT 600 -1024 Left 2 ;Luego setear la frecuencia de la senoidal montada sobre la alimentación.
TEXT 592 -928 Left 3 ;Linear current protection
TEXT 600 -872 Left 2 ;Igual que para Foldback V/I Characteristics pero
TEXT 600 -840 Left 2 ;reemplazar Ra, Rb y Rc por Ra_linear, Rb_linear y Rc_linear
TEXT 40 -1048 Left 2 !.inc "TIP41C.LIB"
TEXT -224 -520 Left 2 ;Suma de corriente
TEXT 208 -536 Left 2 ;Muestrea tensión
TEXT 912 -1560 Left 3 ;(Utilizar el solver en alternate
TEXT 864 -1528 Left 3 ;Tools->control panel->spice->solver)
