Version 4
SHEET 1 1904 680
WIRE -1280 -1904 -2016 -1904
WIRE 192 -1904 -976 -1904
WIRE 1488 -1904 448 -1904
WIRE -1296 -1888 -2000 -1888
WIRE -528 -1888 -960 -1888
WIRE -160 -1888 -528 -1888
WIRE 176 -1888 -160 -1888
WIRE 1472 -1888 464 -1888
WIRE -160 -1792 -160 -1888
WIRE 176 -1792 176 -1888
WIRE 176 -1792 -160 -1792
WIRE -528 -1664 -528 -1888
WIRE -160 -1664 -160 -1792
WIRE -160 -1664 -528 -1664
WIRE 176 -1664 176 -1792
WIRE 176 -1664 -160 -1664
WIRE -960 -1584 -960 -1888
WIRE -528 -1584 -528 -1664
WIRE -528 -1584 -960 -1584
WIRE 448 -1568 448 -1904
WIRE 1456 -1568 448 -1568
WIRE -528 -1536 -528 -1584
WIRE -160 -1536 -160 -1664
WIRE -160 -1536 -528 -1536
WIRE 176 -1536 176 -1664
WIRE 176 -1536 -160 -1536
WIRE -960 -1472 -960 -1584
WIRE -528 -1472 -528 -1536
WIRE -528 -1472 -960 -1472
WIRE -2000 -1296 -2000 -1888
WIRE -1296 -1296 -1296 -1888
WIRE -1296 -1296 -2000 -1296
WIRE -2016 -1280 -2016 -1904
WIRE -1280 -1280 -1280 -1904
WIRE -1280 -1280 -2016 -1280
WIRE -960 -1280 -960 -1472
WIRE -528 -1280 -528 -1472
WIRE -528 -1280 -960 -1280
WIRE -160 -1280 -160 -1536
WIRE -160 -1280 -528 -1280
WIRE 176 -1280 176 -1536
WIRE 176 -1280 -160 -1280
WIRE -976 -1264 -976 -1904
WIRE 192 -1264 192 -1904
WIRE 192 -1264 -976 -1264
WIRE 464 -1248 464 -1888
WIRE 1472 -1248 1472 -1888
WIRE 1472 -1248 464 -1248
WIRE -864 -976 -880 -976
WIRE -672 -976 -784 -976
WIRE -496 -976 -592 -976
WIRE -80 -976 -176 -976
WIRE 128 -976 -80 -976
WIRE 128 -960 128 -976
WIRE -80 -912 -80 -976
WIRE 48 -912 16 -912
WIRE 64 -912 48 -912
WIRE -864 -896 -880 -896
WIRE -672 -896 -784 -896
WIRE -496 -896 -592 -896
WIRE 48 -848 48 -912
WIRE 128 -848 128 -864
WIRE -272 -816 -368 -816
WIRE -144 -800 -208 -800
WIRE -32 -800 -32 -848
WIRE -32 -800 -144 -800
WIRE 128 -800 128 -848
WIRE -368 -784 -368 -816
WIRE -272 -784 -304 -784
WIRE 128 -784 128 -800
WIRE 48 -752 48 -800
WIRE 48 -752 0 -752
WIRE -144 -688 -144 -800
WIRE 0 -688 -144 -688
WIRE 128 -688 128 -704
WIRE 128 -688 96 -688
WIRE 448 -672 448 -1568
WIRE 1456 -672 448 -672
WIRE -624 -640 -768 -640
WIRE -496 -640 -544 -640
WIRE -432 -640 -496 -640
WIRE -304 -640 -304 -784
WIRE -304 -640 -352 -640
WIRE -240 -640 -304 -640
WIRE 128 -640 128 -688
WIRE 128 -640 -160 -640
WIRE 288 -640 128 -640
WIRE -496 -592 -496 -640
WIRE 464 -480 464 -1248
WIRE 1472 -480 1472 -1248
WIRE 1472 -480 464 -480
WIRE 448 -464 448 -672
WIRE 1488 -464 1488 -1904
WIRE 1488 -464 448 -464
FLAG -496 -528 0
FLAG -240 -768 V+
FLAG -240 -832 V-
FLAG -880 -976 V+
FLAG -416 -896 0
FLAG -880 -896 V-
FLAG -416 -976 0
FLAG -768 -640 V-
FLAG -176 -976 V+
FLAG 288 -560 0
FLAG -80 -752 0
FLAG -368 -784 0
SYMBOL res -144 -656 R90
WINDOW 0 0 56 Invisible 2
WINDOW 3 -30 58 VTop 2
SYMATTR InstName R1
SYMATTR Value {R1}
SYMBOL res -336 -656 R90
WINDOW 0 0 56 Invisible 2
WINDOW 3 -29 60 VTop 2
SYMATTR InstName R2
SYMATTR Value {R2}
SYMBOL res -528 -656 R90
WINDOW 0 0 56 Invisible 2
WINDOW 3 -30 60 VTop 2
SYMATTR InstName Rz
SYMATTR Value {Rz}
SYMBOL zener -512 -592 R0
WINDOW 0 24 0 Invisible 2
WINDOW 3 -163 31 Left 2
SYMATTR InstName D2
SYMATTR Value BZX84B6V2L
SYMBOL voltage -576 -896 R90
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 0 24 16 Invisible 2
WINDOW 3 88 -114 VRight 2
SYMATTR InstName V1
SYMATTR Value SINE(0 {SEN_NOISE_AMP} {SEN_NOISE_FREQ})
SYMBOL voltage -688 -976 R270
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 0 24 16 Invisible 2
WINDOW 3 101 -224 VRight 2
SYMATTR InstName V6
SYMATTR Value SINE(0 {SEN_NOISE_AMP} {SEN_NOISE_FREQ})
SYMBOL voltage -512 -976 R270
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 0 24 16 Invisible 2
WINDOW 3 69 -24 VRight 2
SYMATTR InstName V+
SYMATTR Value {LINE_VOLT_POS}
SYMBOL voltage -400 -896 R90
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 0 24 16 Invisible 2
WINDOW 3 53 -85 VRight 2
SYMATTR InstName V-
SYMATTR Value {LINE_VOLT_NEG}
SYMBOL npn 64 -960 R0
WINDOW 0 56 32 Invisible 2
WINDOW 3 61 46 Left 2
SYMATTR InstName Q2
SYMATTR Value Qtip41c
SYMBOL npn -80 -848 R270
WINDOW 0 56 32 Invisible 2
WINDOW 3 87 13 VRight 2
SYMATTR InstName Q1
SYMATTR Value BC547B
SYMBOL npn 0 -752 M90
WINDOW 0 68 57 Invisible 2
WINDOW 3 79 104 VLeft 2
SYMATTR InstName Q3
SYMATTR Value BC337-40
SYMBOL res 112 -800 R0
WINDOW 0 147 -62 Invisible 2
WINDOW 3 39 56 Left 2
SYMATTR InstName Ra
SYMATTR Value {Ra}
SYMBOL res 304 -544 R180
WINDOW 0 36 76 Invisible 2
WINDOW 3 -17 125 Left 2
SYMATTR InstName RL
SYMATTR Value {RL}
SYMBOL res 144 -816 R90
WINDOW 0 -68 -123 Invisible 2
WINDOW 3 1 131 VTop 2
SYMATTR InstName Rc
SYMATTR Value {Rb}
SYMBOL res 16 -768 R90
WINDOW 0 -36 -269 Invisible 2
WINDOW 3 35 64 VTop 2
SYMATTR InstName Rb
SYMATTR Value {Rc}
SYMBOL res 144 -864 R90
WINDOW 0 -292 1401 Invisible 2
WINDOW 3 1 116 VTop 2
SYMATTR InstName R5
SYMATTR Value 1k
SYMBOL voltage -768 -896 R90
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 0 24 16 Invisible 2
WINDOW 3 123 -217 VRight 2
SYMATTR InstName V-Sen
SYMATTR Value PULSE(0 {TRI_NOISE_AMP} 1m 0.01 0.01 1m 0 100)
SYMBOL voltage -880 -976 R270
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 0 24 16 Invisible 2
WINDOW 3 137 -224 VRight 2
SYMATTR InstName V+Sen
SYMATTR Value PULSE(0 {TRI_NOISE_AMP} 1m 0.01 0.01 1m 0 100)
SYMBOL Opamps\\OP284 -240 -736 M180
WINDOW 0 16 32 Invisible 2
WINDOW 3 27 102 Left 2
SYMATTR InstName U1
TEXT 520 -1816 Left 2 !.tran 5 startup
TEXT -912 -1816 Left 2 !.param SEN_NOISE_AMP = 0
TEXT -912 -1776 Left 2 !.param SEN_NOISE_FREQ = 50
TEXT -936 -1944 Left 4 ;User Input & Information
TEXT -864 -1864 Left 3 ;Line Voltage
TEXT -912 -1656 Left 2 !.param LINE_VOLT_POS = 14
TEXT -912 -1616 Left 2 !.param LINE_VOLT_NEG = 7
TEXT -912 -1552 Left 3 ;Load Characteristics
TEXT -840 -1512 Left 2 !.param RL = 5
TEXT -480 -1864 Left 3 ;Current Protection
TEXT -456 -1776 Left 2 !.param Ra = 0.56
TEXT -456 -1736 Left 2 !.param Rb = 680
TEXT 584 -1432 Left 2 ;.step dec param LOAD_RES 100 0.1 50
TEXT -456 -1696 Left 2 !.param Rc = 10000
TEXT -472 -1640 Left 3 ;Detection Circuit
TEXT -448 -1600 Left 2 !.param R2 = 6k8
TEXT -448 -1568 Left 2 !.param R1 = 10000
TEXT -136 -1640 Left 3 ;Voltage Generator
TEXT -48 -1600 Left 2 ;Vz = 6.2V
TEXT -96 -1568 Left 2 !.param Rz =68
TEXT -416 -1824 Left 2 ;Tp = BC337
TEXT -96 -1856 Left 3 ;Error Amplifier
TEXT -72 -1816 Left 2 ;Opamp = OP284
TEXT -104 -1752 Left 3 ;Pass Transistor
TEXT -136 -1712 Left 2 ;BC547-TIP31C Darlington
TEXT 488 -1944 Left 4 ;Simulations
TEXT 488 -1520 Left 3 ;Foldback V/I characteristics
TEXT 512 -1376 Left 2 ;Se debe igualar RL a el step parameter LOAD_RES, luego se grafica V(Vout)
TEXT 512 -1344 Left 2 ;e -I(R2) en el eje horizontal, luego, hacer click derecho, click en view
TEXT 512 -1312 Left 2 ;y finalmente click en show data points, sino NO FUNCIONARA
TEXT -1984 -1864 Left 2 !.param Ra_linear = 0.2748
TEXT -1984 -1832 Left 2 !.param Rb_linear = 0.0000000001
TEXT -1984 -1800 Left 2 !.param Rc_linear = 99999999999999
TEXT 496 -1184 Left 3 ;Line sinusoidal noise simulation
TEXT 504 -1128 Left 2 ;Se debe colocar un valor no nulo al parametro NOISE_AMP.
TEXT 504 -1096 Left 2 ;Luego setear la frecuencia de la senoidal montada sobre la alimentación.
TEXT 496 -1000 Left 3 ;Linear current protection
TEXT 504 -944 Left 2 ;Igual que para Foldback V/I Characteristics pero
TEXT 504 -912 Left 2 ;reemplazar Ra, Rb y Rc por Ra_linear, Rb_linear y Rc_linear
TEXT 592 -776 Left 2 ;corriente maxima por fuente
TEXT 592 -752 Left 2 ;tension minima y maxima de fuente de linea positiva y negativa
TEXT 592 -728 Left 2 ;Rl minima
TEXT 592 -704 Left 2 ;rl maxima
TEXT -1912 -1760 Left 2 !.inc "TIP41C.LIB"
TEXT -408 -600 Left 2 ;Suma de corriente
TEXT 8 -600 Left 2 ;Muestreo de tensión
TEXT 720 -1952 Left 2 ;(UTILIZAR EL SOLVER EN ALTERNATE!!
TEXT 728 -1920 Left 2 ;Tools->control panel->spice->solver)
TEXT -1936 -1736 Left 2 !.inc "BZX84B6V2L.LIB"
TEXT -912 -1736 Left 2 !.param TRI_NOISE_AMP = 0
TEXT -912 -1696 Left 2 !.param TRI_NOISE_FREQ = 50
TEXT -1976 -1944 Left 4 ;Misc, Includes & Directives
TEXT 488 -1856 Left 3 ;Transient Simulation
